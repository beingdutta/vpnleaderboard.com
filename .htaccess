Options -Indexes
<IfModule mod_rewrite.c>
  RewriteEngine On

# --- Production Redirects (www and https) ---
# Only apply these rules if the host is NOT localhost
RewriteCond %{HTTP_HOST} !^localhost [NC]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ https://www.vpnleaderboard.com/$1 [L,R=301]
RewriteCond %{HTTP_HOST} !^localhost [NC]
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [L,R=301]

# --- Remove .php extension from URL ---
RewriteCond %{THE_REQUEST} \s/+(.+?)\.php[\s?] [NC]
RewriteRule ^ %1 [R=301,L]

# --- Rewrite clean URLs to .php files ---
# Rewrite for files in subdirectories (e.g., /reviews/some-review)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([^/]+)/([^/]+)/?$ $1/$2.php [L]

# If the request is not for an existing file or directory, show 404 page
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php !-f
RewriteRule ^(.*)$ /404.php [L]
</IfModule>